
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Socionics IE Survey — Step 1 Only (Ability & Value → Model A)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  :root{--gap:16px}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.55;margin:24px;max-width:1100px}
  h1,h2,h3{margin:0.5em 0}
  .muted{color:#555}
  .small{font-size:0.95em}
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
  .card{border:1px solid #ddd;border-radius:12px;padding:18px;margin:16px 0;background:#fff}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--gap)}
  .q{border:1px solid #eee;border-radius:12px;padding:12px}
  .q h3{margin-top:0}
  .row{display:flex;gap:10px;align-items:center}
  .slider{width:100%}
  .scale{display:flex;justify-content:space-between;font-size:0.85em;color:#666;margin-top:2px}
  .btn{display:inline-block;padding:10px 16px;border:1px solid #333;border-radius:10px;cursor:pointer;text-decoration:none;margin-right:8px}
  .btn:hover{background:#f5f5f5}
  .result{padding:16px;border-radius:12px;background:#fafafa;border:1px dashed #bbb}
  table{border-collapse:collapse;width:100%;margin-top:8px}
  th,td{border:1px solid #e5e5e5;padding:8px;text-align:left}
  details{margin-top:10px}
  .badge{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid #ccc;font-size:0.8em;margin-left:6px}
</style>
</head>
<body>

<h1>Socionics IE Survey — Step 1 Only</h1>
<p class="muted">Rate how well you <strong>use</strong> (Ability) and how much you <strong>value</strong> (Value) each Information Element. We’ll estimate your sociotype by matching your profile to <strong>Model A</strong> (leading/creative) and <strong>quadra values</strong>. No other steps required.</p>

<div class="card">
  <h2>Rate each IE (Ability &amp; Value)</h2>
  <p class="small muted">Scale: 1 = not at all / very low • 5 = very much / very high. You don’t need to know IE jargon — the prompts are everyday scenarios.</p>
  <div id="survey" class="grid"></div>
</div>

<div class="card">
  <h2>Analyze</h2>
  <button class="btn" onclick="analyze()">Compute type</button>
  <button class="btn" onclick="resetAll()">Clear</button>
  <p class="small muted">Algorithm: aligns your highest <em>Ability</em>+<em>Value</em> IEs with each type’s <strong>leading</strong> and <strong>creative</strong> functions; rewards matching <strong>quadra</strong> values; lightly penalizes valuing non‑quadra IEs.</p>
</div>

<div id="out" class="result" style="display:none"></div>

<script>
const ITEMS = [
  {code:"Ne", name:"Extraverted Intuition", abilityQ:"When faced with a new situation, how easily do you generate multiple, unconventional ideas or directions to try?", valueQ:"How much do you enjoy/seek conversations and work that explore many possibilities before narrowing down?"},
  {code:"Ni", name:"Introverted Intuition", abilityQ:"How naturally do you see patterns over time and anticipate how events are likely to unfold?", valueQ:"How much do you prefer a single, coherent vision of the future over keeping many options open?"},
  {code:"Se", name:"Extraverted Sensing", abilityQ:"How comfortable are you asserting yourself, taking control, and pushing through obstacles when action is needed?", valueQ:"How much do you respect and want decisive, willful action (staking a claim, moving fast) in your life/team?"},
  {code:"Si", name:"Introverted Sensing", abilityQ:"How good are you at noticing and maintaining comfort, health, and a calm, pleasant environment?", valueQ:"How much do you value stability, coziness, and minimizing stress/discomfort day to day?"},
  {code:"Te", name:"Extraverted Logic", abilityQ:"How easily do you find, apply, and compare measurable facts and methods to get practical results?", valueQ:"How much do you prize efficiency, productivity, and making choices by what works in practice?"},
  {code:"Ti", name:"Introverted Logic", abilityQ:"How naturally do you build clear frameworks and definitions so everything fits together logically?", valueQ:"How much do you value internal consistency and precise concepts to make sense of things?"},
  {code:"Fe", name:"Extraverted Ethics", abilityQ:"How good are you at reading the mood of a group and using expression to influence or harmonize it?", valueQ:"How much do you enjoy shared emotional expression (enthusiasm, atmosphere) with others?"},
  {code:"Fi", name:"Introverted Ethics", abilityQ:"How naturally do you sense closeness/distance in relationships and act to keep them authentic?", valueQ:"How much do you value loyalty, personal connection, and acting in line with your moral compass?"}
];

const TYPES = {
  // Alpha
  "ILE": {mbti:"ENTp", quadra:"Alpha", lead:"Ne", creative:"Ti"},
  "SEI": {mbti:"ISFp", quadra:"Alpha", lead:"Si", creative:"Fe"},
  "ESE": {mbti:"ESFj", quadra:"Alpha", lead:"Fe", creative:"Si"},
  "LII": {mbti:"INTj", quadra:"Alpha", lead:"Ti", creative:"Ne"},
  // Beta
  "SLE": {mbti:"ESTp", quadra:"Beta", lead:"Se", creative:"Ti"},
  "IEI": {mbti:"INFp", quadra:"Beta", lead:"Ni", creative:"Fe"},
  "EIE": {mbti:"ENFj", quadra:"Beta", lead:"Fe", creative:"Ni"},
  "LSI": {mbti:"ISTj", quadra:"Beta", lead:"Ti", creative:"Se"},
  // Gamma
  "SEE": {mbti:"ESFp", quadra:"Gamma", lead:"Se", creative:"Fi"},
  "ILI": {mbti:"INTp", quadra:"Gamma", lead:"Ni", creative:"Te"},
  "LIE": {mbti:"ENTj", quadra:"Gamma", lead:"Te", creative:"Ni"},
  "ESI": {mbti:"ISFj", quadra:"Gamma", lead:"Fi", creative:"Se"},
  // Delta
  "SLI": {mbti:"ISTp", quadra:"Delta", lead:"Si", creative:"Te"},
  "IEE": {mbti:"ENFp", quadra:"Delta", lead:"Ne", creative:"Fi"},
  "EII": {mbti:"INFj", quadra:"Delta", lead:"Fi", creative:"Ne"},
  "LSE": {mbti:"ESTj", quadra:"Delta", lead:"Te", creative:"Si"}
};

const QUADRA_VALUES = {
  "Alpha": ["Ne","Ti","Fe","Si"],
  "Beta":  ["Se","Ti","Fe","Ni"],
  "Gamma": ["Se","Fi","Te","Ni"],
  "Delta": ["Si","Fi","Te","Ne"]
};

function buildSurvey(){
  const box = document.getElementById('survey');
  box.innerHTML = "";
  ITEMS.forEach(item => {
    const div = document.createElement('div');
    div.className = "q";
    div.innerHTML = `
      <h3>${item.name} <span class="badge mono">${item.code}</span></h3>
      <div><strong>Ability:</strong> ${item.abilityQ}</div>
      <div class="row">
        <input type="range" min="1" max="5" value="3" step="1" class="slider" id="${item.code}_A" oninput="upd('${item.code}','A')">
        <span class="mono" id="${item.code}_A_val">3</span>
      </div>
      <div class="scale"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div>
      <div style="height:10px"></div>
      <div><strong>Value:</strong> ${item.valueQ}</div>
      <div class="row">
        <input type="range" min="1" max="5" value="3" step="1" class="slider" id="${item.code}_V" oninput="upd('${item.code}','V')">
        <span class="mono" id="${item.code}_V_val">3</span>
      </div>
      <div class="scale"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div>
    `;
    box.appendChild(div);
  });
}

function upd(code, kind){
  const v = document.getElementById(`${code}_${kind}`).value;
  document.getElementById(`${code}_${kind}_val`).textContent = v;
}

function analyze(){
  // normalize to 0..1
  const A = {}, V = {};
  ITEMS.forEach(it => {
    A[it.code] = (parseInt(document.getElementById(`${it.code}_A`).value,10)-1)/4;
    V[it.code] = (parseInt(document.getElementById(`${it.code}_V`).value,10)-1)/4;
  });

  // score each type
  const rows = [];
  for(const t in TYPES){
    const meta = TYPES[t];
    const lead = meta.lead, creative = meta.creative;
    const qvals = QUADRA_VALUES[meta.quadra];

    let s = 0;
    // Heavy weight for Ego (lead/creative) alignment
    s += 3.2*A[lead] + 3.2*V[lead];
    s += 2.7*A[creative] + 2.7*V[creative];

    // Quadra valuation (value>ability emphasis)
    qvals.forEach(el=>{ s += 1.25*V[el] + 0.35*A[el]; });

    // Light penalty for valuing non-quadra elements
    const all = Object.keys(A);
    all.filter(el=>!qvals.includes(el)).forEach(el=>{ s -= 0.35*V[el]; });

    rows.push({type:t, quadra:meta.quadra, mbti:meta.mbti, lead, creative, score:s});
  }

  rows.sort((a,b)=>b.score-a.score);

  // Identify possible suggestive/mobilizing: high value but low ability
  const diffs = Object.keys(A).map(ie => ({ie, dv: V[ie]-A[ie]})).sort((a,b)=>b.dv-a.dv);
  const topSuggestive = diffs.slice(0,2).map(x=>x.ie).join(", ");

  // Build ratings table
  let tbl = `<table><thead><tr><th>IE</th><th>Ability (1–5)</th><th>Value (1–5)</th></tr></thead><tbody>`;
  ITEMS.forEach(it => {
    const av = Math.round(A[it.code]*4)+1;
    const vv = Math.round(V[it.code]*4)+1;
    tbl += `<tr><td class="mono">${it.code}</td><td>${av}</td><td>${vv}</td></tr>`;
  });
  tbl += `</tbody></table>`;

  const out = document.getElementById('out');
  out.style.display = "block";

  let html = `<h2>Top matches</h2><ol>`;
  rows.slice(0,5).forEach(r => {
    html += `<li><strong>${r.type}</strong> (${r.mbti}) — ${r.quadra} &nbsp; <span class="mono">${r.lead}–${r.creative}</span> <span class="muted small">score: ${r.score.toFixed(2)}</span></li>`;
  });
  html += `</ol>`;

  const best = rows[0];
  const qset = QUADRA_VALUES[best.quadra].join(", ");
  html += `<p><strong>Best fit:</strong> ${best.type} (${best.mbti}), ${best.quadra} quadra. Expected valued set: <span class="mono">${qset}</span>.</p>`;

  html += `<p class="small muted"><strong>Potential suggestive/mobilizing IEs (high value but lower ability):</strong> <span class="mono">${topSuggestive || "—"}</span></p>`;

  html += `<details><summary><strong>Your raw ratings</strong></summary>${tbl}</details>`;

  html += `<details><summary><strong>How this was derived</strong></summary>
  <p>We emphasized your Ability & Value ratings for each IE. Types rose in rank when your highest scores aligned with their <em>leading</em> and <em>creative</em> elements and when your overall values matched their quadra values. We lightly penalized valuing non-quadra elements.</p>
  <p class="small muted">This is a hypothesis generator. In Russian practice, an interview is used to confirm Model A positions (Role, PoLR, Suggestive).</p>
  </details>`;

  out.innerHTML = html;
}

function resetAll(){
  buildSurvey();
  const out = document.getElementById('out');
  out.style.display = "none";
  out.innerHTML = "";
}

buildSurvey();
</script>

</body>
</html>
